#!/bin/bash

# nmap full scan, all scan in one!

# get project name
if [[ $# -ne 1 ]]; then
    echo "please input single project name"
    exit 1
fi

PROJECT_NAME=$1
PROJECT_ROOT=../../projects/$PROJECT_NAME
TIME=`date "+%Y-%m-%d.%H:%M:%S"`

# check if output exists
if [[ ! -d "$PROJECT_ROOT/outputs" ]]; then
    mkdir $PROJECT_ROOT/outputs
fi

cat $PROJECT_ROOT/targets/* | ../independent/ip_handler.py -c | nmap -iL - -v -n -p0-65535 -T4 -oA "$PROJECT_ROOT/outputs/nmap-full-$TIME" -sS -sV -O
